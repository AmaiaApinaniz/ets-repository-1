<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="c837298f-a10e-42d1-88f2-f1415cbbb463" activeEnvironment="Default" name="Conformance Class: Discovery Service - CSW Core" resourceRoot="" soapui-version="5.4.0" xmlns:con="http://eviware.com/soapui/config"><con:description>This test suite examines an OGC Discovery Service against the requirements related to INSPIRE</con:description><con:settings/><con:testSuite id="0c3e1720-dbdf-4970-bb85-f00c3bd75ff1" name="Initialize"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="27dc63e3-a8c0-443f-9261-68573c84b2ef" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="initial-testcase" searchProperties="true"><con:settings/><con:testStep type="groovy" name="reset-properties" id="2979a0fa-4a5f-4cef-83a5-4bc99703a638"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue( 'extended_capabilities_scenario', '1' );
testRunner.testCase.testSuite.project.setPropertyValue( 'lastServiceEndpoint', '');
/*
def tsGetObservation = testRunner.testCase.testSuite.project.testSuites["Service_Metadata"].testCases["at04-xml-schema-validation"].getTestStepByName('http-request-xml-schema-valid');
tsGetObservation.setDisabled(true);
*/</script></con:config></con:testStep><con:testStep type="httprequest" name="http-request" id="2ea74ad1-db3b-461d-9a4c-685af9ad7a8f"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="b2a323da-3fa1-42d9-9f3b-fbad043f45b9" name="http-request" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#serviceEndpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>service</con:name><con:value>${#Project#service}</con:value><con:style>QUERY</con:style><con:default>${#Project#service}</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>request</con:name><con:value>GetCapabilities</con:value><con:style>QUERY</con:style><con:default>GetCapabilities</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>version</con:name><con:value>${#Project#version}</con:value><con:style>QUERY</con:style><con:default>${#Project#AcceptVersions}</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="groovy" name="set-extended-capabilities-scenario" id="f3fec736-1ec7-4263-9697-eaead5fbf05e"><con:settings/><con:config><script>def response = context.expand('${http-request#Response}');
def capabilities = new XmlSlurper().parseText(response);
def extendedCapabilities = capabilities.depthFirst().findAll{it.name() == 'ExtendedCapabilities' &amp;&amp; it.parent().name() == 'OperationsMetadata'}[0];
def scenario = '1';
testRunner.testCase.testSuite.project.setPropertyValue('extended_capabilities_scenario', scenario);
if(extendedCapabilities.ResourceLocator.size() == 1 ||
   extendedCapabilities.ResourceType.size() == 1 ||
   extendedCapabilities.TemporalReference.size() == 1 ||
   extendedCapabilities.Conformity.size() == 1 ||
   extendedCapabilities.MetadataPointOfContact.size() == 1 ||
   extendedCapabilities.MetadataDate.size() == 1 ||
   extendedCapabilities.SpatialDataServiceType.size() == 1 ||
   extendedCapabilities.MandatoryKeyword.size() == 1){
	scenario = '2';
	testRunner.testCase.testSuite.project.setPropertyValue('extended_capabilities_scenario', scenario);
}
log.info('Extended Capabilities Scenario: ' + scenario);
</script></con:config></con:testStep><con:testStep type="groovy" name="set-lastserviceendpoint" id="398c931c-7439-45ca-be08-4ed973529c52"><con:settings/><con:config><script>def lastServiceEndpoint = context.expand('${http-request#EndPoint}');
testRunner.testCase.testSuite.project.setPropertyValue( 'lastServiceEndpoint', lastServiceEndpoint);
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c2bf56ae-2544-4b9d-9fdf-28654aa6111f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="check-initial-testcase" searchProperties="true"><con:settings/><con:testStep type="groovy" name="run-initial-testcase-if-needed" id="832adc57-d05d-46a7-a631-4058a843a114"><con:settings/><con:config><script>def tc = testRunner.testCase.testSuite.project.testSuites["Initialize"].testCases["initial-testcase"];
def serviceEndPoint = testRunner.testCase.testSuite.project.getPropertyValue('serviceEndpoint');
def lastServiceEndPoint = testRunner.testCase.testSuite.project.getPropertyValue('lastServiceEndpoint');
def makeInitialRequest = false;
if (tc.getTestStepByName("http-request").getPropertyValue("Response") == null){
	makeInitialRequest = true;
}
else if(serviceEndPoint != lastServiceEndPoint){
	makeInitialRequest = true;
}
if(makeInitialRequest){
	runner = tc.run(new com.eviware.soapui.support.types.StringToObjectMap(), false);
}
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="f9acf29f-1355-4c5b-9739-2084c4adebc7" name="Discovery_Service_Operations"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="afe7b0dd-4860-42c2-9d01-d08a30b77e52" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-07-extended-capabilities" searchProperties="true"><con:description><![CDATA[<p>Test that the service provides the INSPIRE extended metadata.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-07-extended-capabilities.md" target="_blank">Extended Capabilities</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="88ca47a3-a58d-4e0f-848f-392faf695f07" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-12-discover-resource-matching-query" searchProperties="true"><con:description><![CDATA[<p>Test that the Discover Metadata response contains at least the INSPIRE metadata elements.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-12-discover-resource-matching-query.md" target="_blank">Discover Resource Matching Query</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="40d2cbc1-bbf1-455a-9479-40dbbb2089fa" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-15-link-publish-metadata-operation" searchProperties="true"><con:description><![CDATA[<p>Test that discovery client approach is implemented properly.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-15-link-publish-metadata-operation.md" target="_blank">Link Publish Metadata Operation</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="2a8dd1b2-1ea8-4d27-b5c3-f57649516631" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-16-link-federated-capabilities-document" searchProperties="true"><con:description><![CDATA[<p>Test that federated Discovery Service are plublished in capabilities document.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-16-link-federated-capabilities-document.md" target="_blank">Link Federated Capabilities Document</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="8ce70701-2ddd-4431-b1bc-dae67bf06799" name="Discovery_Service_Queryable"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="3b4f5f9b-26b8-4d4d-bd98-9f8c50a7d78b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-19-query-search-criteria" searchProperties="true"><con:description><![CDATA[<p>Test that the Discover Metadata service supports queryables.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-19-query-search-criteria.md" target="_blank">Query Search Criteria</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="fa3c3fe2-c050-4ab9-a30f-c280577982fd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-20-query-language-parameter" searchProperties="true"><con:description><![CDATA[<p>Test that the Discover Metadata service accepts the language parameter.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-20-query-language-parameter.md" target="_blank">Query Language Parameter</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="dce42f1a-2694-4b8d-bee9-6b26af1e0a3c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-21-query-additional-parameters" searchProperties="true"><con:description><![CDATA[<p>Test that the Discover Metadata service supports additional queryables.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-21-query-additional-parameters.md" target="_blank">Query Additional Parameters</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="2d49ae6c-7d6a-4f7c-9a35-611b2a4f5bae" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-22-query-parameters-advertised" searchProperties="true"><con:description><![CDATA[<p>Test that all ISO and additional queryables are advertised in the capabilities document.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-22-query-parameters-advertised.md" target="_blank">Query Parameters Advertised</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="4ed5dac2-d800-4ecb-bec7-c85799ec1ea7" name="Language_Requirements"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="0340ec22-fc88-44ea-9025-b8ad687ab148" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-24-language-natural-lang-fields" searchProperties="true"><con:description><![CDATA[<p>Test that natural language fields vary depending on the requested language.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-24-language-natural-lang-fields.md" target="_blank">Language Natural Language Fields</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="2cc39a22-33b0-432c-b4f3-f9fca0d7fa84" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-25-language-parameter-iso-valid" searchProperties="true"><con:description><![CDATA[<p>Test that the service support the parameter LANGUAGE.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-25-language-parameter-iso-valid.md" target="_blank">Language Parameter ISO valid</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="027e7c14-b1ba-41d0-b39f-92c27fab80e4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-26-language-natural-fields-default" searchProperties="true"><con:description><![CDATA[<p>Test that natural language fields are provided in default language when requested language is unsupported or absent.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-26-language-natural-fields-default.md" target="_blank">Language Natural Fields Default</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="3f6b71ea-b31b-404b-9356-3ada755def9e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-27-language-response-value" searchProperties="true"><con:description><![CDATA[<p>Test that the response language is correct based on the requested language.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-27-language-response-value.md" target="_blank">Language Response Value</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="364fcdc7-28ff-4a0d-b4c7-fceeed81f406" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-28-language-supported-default-cardinality" searchProperties="true"><con:description><![CDATA[<p>Test that the cardinality of supported languages is correct.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-28-language-supported-default-cardinality.md" target="_blank">Language Supported Default Cardinality</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="ed17066c-0557-4428-a72a-e0bbe7dba5e1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-29-extended-capabilities-schema-valid" searchProperties="true"><con:description><![CDATA[<p>Test that the capabilities document is schema valid.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-29-extended-capabilities-schema-valid.md" target="_blank">Extended Capabilities Schema Valid</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="9e3b0ac3-5909-437b-9017-8338a6fc89d6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-30-language-getrecords-without-parameter" searchProperties="true"><con:description><![CDATA[<p>Test the service behaviour without a language specific filter.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-30-language-getrecords-without-parameter.md" target="_blank">Language GetRecords without Parameter</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="50c8af6f-8bf0-4b81-9a1e-105b0cbc579e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-31-language-getrecords-lang-filter" searchProperties="true"><con:description><![CDATA[<p>Test that the service supports filtering by language.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-31-language-getrecords-lang-filter.md" target="_blank">Language GetRecords Language Filter</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:testCase id="95597eca-45eb-4105-8e82-837b87263155" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="at-32-language-getrecords-exception" searchProperties="true"><con:description><![CDATA[<p>Test that GetRecords exceptions are provided in the correct language.</p>
<p>More information: <a href="https://github.com/inspire-eu-validation/discovery-service/blob/review-ats-csw-3.1/csw-iso-ap/at-32-language-getrecords-exception.md" target="_blank">Language GetRecords Exception</a></p>]]></con:description><con:settings/><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>serviceEndpoint</con:name><con:value>http://www.idee.es/csw-codsi-idee/srv/spa/csw?Request=GetCapabilities&amp;Service=CSW</con:value></con:property><con:property><con:name>service</con:name><con:value>CSW</con:value></con:property><con:property><con:name>version</con:name><con:value>2.0.2</con:value></con:property><con:property><con:name>extended_capabilities_scenario</con:name><con:value>1</con:value></con:property><con:property><con:name>lastServiceEndpoint</con:name><con:value/></con:property><con:property><con:name>authUser</con:name><con:value/></con:property><con:property><con:name>authPwd</con:name><con:value/></con:property><con:property><con:name>authMethod</con:name><con:value/></con:property><con:property><con:name>etf.ignore.properties</con:name><con:value>service, version, lastServiceEndpoint, authUser, authPwd, authMethod</con:value></con:property><con:property><con:name>etf.tag.ids</con:name><con:value>EID0861e71d-bb54-4fa2-8d32-816b41531da3</con:value></con:property><con:property><con:name>etf.translation.template.collection.id</con:name><con:value>EID6f004d02-ca77-4a67-99a4-62515725a573</con:value></con:property><con:property><con:name>etf.supported.test.object.type.ids</con:name><con:value>EID4b0fb35d-10f0-47df-bc0b-6d4548035ae2</con:value></con:property><con:property><con:name>etf.author</con:name><con:value>Consortium Bilbomatica, Guadaltel &amp; Geograma</con:value></con:property><con:property><con:name>etf.creation.date</con:name><con:value>2019-05-06T10:00:00</con:value></con:property><con:property><con:name>etf.last.editor</con:name><con:value>Consortium Bilbomatica, Guadaltel &amp; Geograma</con:value></con:property><con:property><con:name>etf.last.update.date</con:name><con:value>2019-05-06T10:00:00</con:value></con:property><con:property><con:name>etf.version</con:name><con:value>0.0.1</con:value></con:property><con:property><con:name>etf.reference</con:name><con:value>https://github.com/inspire-eu-validation/discovery-service</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>